<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CinemaX Pro</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">
<style>
:root{
  --main:#e50914;
  --gold:#ffd700;
  --bg:#0b0b0f;
  --card:#14141b;
  --text:#fff;
  --muted:#aaa;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:'Cairo',sans-serif;}
body{background:var(--bg);color:var(--text);}
header{position:sticky;top:0;z-index:50;display:flex;align-items:center;padding:12px 20px;background:linear-gradient(90deg,#000,#111);box-shadow:0 5px 15px rgba(0,0,0,.7);}
.logo{font-size:22px;font-weight:800;color:var(--main);text-shadow:0 0 12px var(--main);margin-right:15px}
.toolbar{display:flex;align-items:center;gap:15px;flex:1}
.toolbar input{flex:1;padding:8px 14px;border-radius:30px;border:none;background:rgba(255,255,255,0.08);color:#fff;outline:none}
.toolbar button{padding:8px 14px;border-radius:20px;border:none;background:var(--gold);color:#000;cursor:pointer;transition:.3s}
.toolbar button:hover{opacity:.8}
.menu-btn{font-size:22px;cursor:pointer;color:var(--main)}
.sidebar{position:fixed;top:0;right:-260px;width:260px;height:100%;background:linear-gradient(180deg,#111,#000);padding:20px;transition:.35s;z-index:60;overflow:auto;}
.sidebar.active{right:0}
.sidebar h3{color:var(--gold);margin-bottom:15px}
.sidebar a{display:block;color:#fff;padding:10px 0;text-decoration:none;border-radius:10px;transition:.3s}
.sidebar a:hover{background:var(--main);color:#000}
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);opacity:0;pointer-events:none;transition:.3s;z-index:55}
.overlay.active{opacity:1;pointer-events:auto}
.hero{position:relative;height:60vh;overflow:hidden;margin-bottom:20px;border-radius:15px}
.slide{position:absolute;inset:0;opacity:0;transition:.8s}
.slide.active{opacity:1}
.slide img{width:100%;height:100%;object-fit:cover;filter:brightness(.7)}
.slide .cap{position:absolute;bottom:20px;right:20px;color:#fff;text-shadow:0 0 8px #000}
section{padding:0 20px 20px}
section h2{color:var(--gold);margin:10px 0}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(170px,1fr));gap:15px}
.card{background:var(--card);border-radius:15px;overflow:hidden;box-shadow:0 10px 25px rgba(0,0,0,.7);transition:.35s;cursor:pointer}
.card:hover{transform:translateY(-6px);box-shadow:0 0 25px var(--main)}
.card img{width:100%;height:230px;object-fit:cover}
.card .info{padding:10px;text-align:center}
.card .info small{color:var(--muted)}
ul{list-style:none;margin-top:10px} 
ul li a{color:var(--text);text-decoration:none} 
ul li a:hover{color:var(--main)}
</style>
</head>
<body>
<div class="overlay" id="overlay" onclick="toggleSidebar()"></div>
<header>
  <span class="menu-btn" onclick="toggleSidebar()">â˜°</span>
  <div class="logo">CinemaX Pro</div>
  <div class="toolbar">
    <input type="text" id="search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙÙŠÙ„Ù… Ø£Ùˆ Ù…Ø³Ù„Ø³Ù„..." oninput="applySearch()">
    <button onclick="toggleCinema()">ğŸ¬ ÙˆØ¶Ø¹ Ø§Ù„Ø³ÙŠÙ†Ù…Ø§</button>
  </div>
</header>
<aside class="sidebar" id="sidebar">
  <h3>Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</h3>
  <a href="#" onclick="goHome()">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
  <a href="#">ğŸ”¥ Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø´Ø§Ù‡Ø¯Ø©</a>
  <a href="#">ğŸ­ Ø­Ø³Ø¨ Ø§Ù„Ù…Ø²Ø§Ø¬</a>
  <a href="#">â¤ï¸ Ø§Ù„Ù…ÙØ¶Ù„Ø©</a>
</aside>
<main id="home">
  <div class="hero" id="hero"></div>
  <section class="section">
    <h2>Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø´Ø§Ù‡Ø¯Ø©</h2>
    <div class="grid" id="grid"></div>
  </section>
</main>
<section class="detail" id="detail" style="display:none; padding:20px;">
  <button onclick="goHome()">â¬… Ø±Ø¬ÙˆØ¹</button>
  <h2 id="detail-title"></h2>
  <p id="detail-desc"></p>
  <ul id="episodes"></ul>
</section>
<script>
const overlay=document.getElementById('overlay');
const sidebar=document.getElementById('sidebar');
const hero=document.getElementById('hero');
const grid=document.getElementById('grid');
const detail=document.getElementById('detail');
const detailTitle=document.getElementById('detail-title');
const detailDesc=document.getElementById('detail-desc');
const episodesList=document.getElementById('episodes');
let slides=[],currentSlide=0;
let movies=[];

// ØªØ­Ù…ÙŠÙ„ JSON
fetch('movies.json')
  .then(res=>res.json())
  .then(data=>{
    movies=data;
    createHero();
    renderGrid();
  })
  .catch(err=>console.error(err));

function createHero(){
  movies.forEach((m,i)=>{
    const s=document.createElement('div');
    s.className='slide';
    if(i===0)s.classList.add('active');
    s.innerHTML=`<img src="${m.img}" class="lazy"><div class="cap"><h1>${m.title}</h1><small>${m.year} â€¢ ${m.genre}</small></div>`;
    hero.appendChild(s);
    slides.push(s);
  });
  setInterval(()=>{
    slides[currentSlide].classList.remove('active');
    currentSlide=(currentSlide+1)%slides.length;
    slides[currentSlide].classList.add('active');
  },5000);
}

function renderGrid(){
  grid.innerHTML='';
  movies.forEach(m=>{
    const c=document.createElement('div');
    c.className='card';
    c.innerHTML=`<img src="${m.img}" class="lazy"><div class="info"><b>${m.title}</b><br><small>${m.genre} â€¢ ${m.year}</small></div>`;
    c.onclick=()=>openDetail(m);
    grid.appendChild(c);
  });
}

function openDetail(movie){
  detailTitle.textContent=movie.title;
  detailDesc.textContent=movie.description;
  episodesList.innerHTML='';
  movie.episodes.forEach(ep=>{
    const li=document.createElement('li');
    li.innerHTML=`<a href="${ep.video}" target="_blank">${ep.title}</a>`;
    episodesList.appendChild(li);
  });
  detail.style.display='block';
  home.style.display='none';
}

function goHome(){
  detail.style.display='none';
  home.style.display='block';
}

function toggleSidebar(){
  sidebar.classList.toggle('active');
  overlay.classList.toggle('active');
}

function toggleCinema(){
  document.body.classList.toggle('cinema');
}

function applySearch(){
  const q=document.getElementById('search').value.toLowerCase();
  grid.innerHTML='';
  movies.filter(m=>m.title.toLowerCase().includes(q))
        .forEach(m=>{
          const c=document.createElement('div');
          c.className='card';
          c.innerHTML=`<img src="${m.img}" class="lazy"><div class="info"><b>${m.title}</b><br><small>${m.genre} â€¢ ${m.year}</small></div>`;
          c.onclick=()=>openDetail(m);
          grid.appendChild(c);
        });
}

window.onpopstate=()=>goHome();
</script>
</body>
</html>
